# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ë–æ—Ç–∞ –ë–∞–ª—å—Ç–∞–∑–∞—Ä –ú—É–¥—Ä–æ–≥–æ

![–õ–æ–≥–æ—Ç–∏–ø –ë–∞–ª—å—Ç–∞–∑–∞—Ä](https://memepedia.ru/wp-content/uploads/2021/12/pondering-my-orb-mem.jpg)

–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç –¥–ª—è RPG-—Å–µ—Å—Å–∏–π —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –º–∞–≥–∏–∏ –∏ –º–µ—Ö–∞–Ω–∏–∫–æ–π D&D 5E.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ë–æ—Ç–∞ –ë–∞–ª—å—Ç–∞–∑–∞—Ä –ú—É–¥—Ä–æ–≥–æ](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-–¥–ª—è-–±–æ—Ç–∞-–±–∞–ª—å—Ç–∞–∑–∞—Ä-–º—É–¥—Ä–æ–≥–æ)
  - [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)
  - [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
    - [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
    - [.env](#env)
    - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [üéÆ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
  - [üìä –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞](#-—Å–∏—Å—Ç–µ–º–∞-–ø–µ—Ä—Å–æ–Ω–∞–∂–∞)
    - [–î–∏–∞–ø–∞–∑–æ–Ω—ã –∏ –±–æ–Ω—É—Å—ã:](#–¥–∏–∞–ø–∞–∑–æ–Ω—ã-–∏-–±–æ–Ω—É—Å—ã)
      - [–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:](#–ø—Ä–∏–º–µ—Ä-–∑–∞–ø–∏—Å–∏-–≤-–±–∞–∑–µ-–¥–∞–Ω–Ω—ã—Ö)
  - [üé≤ –ú–µ—Ö–∞–Ω–∏–∫–∞ –±—Ä–æ—Å–∫–æ–≤](#-–º–µ—Ö–∞–Ω–∏–∫–∞-–±—Ä–æ—Å–∫–æ–≤)
  - [üßô –ú–æ–¥—É–ª—å –º–∞–≥–∞](#-–º–æ–¥—É–ª—å-–º–∞–≥–∞)
  - [üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
  - [‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#-—á–∞—Å—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
    - [–í: –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ–Ω—É—Å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞?](#–≤-–∫–∞–∫-—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è-–±–æ–Ω—É—Å-–º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞)
    - [–í: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/wise_wizard`?](#–≤-–º–æ–∂–Ω–æ-–ª–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-—Å–≤–æ–∏-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è-–¥–ª—è-–∫–æ–º–∞–Ω–¥—ã-wise_wizard)
    - [–í: –ú–æ–∂–Ω–æ –ª–∏ —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/wise_wizard`?](#–≤-–º–æ–∂–Ω–æ-–ª–∏-—Å–º–µ–Ω–∏—Ç—å-—è–∑—ã–∫–æ–≤—É—é-–º–æ–¥–µ–ª—å-–¥–ª—è-–∫–æ–º–∞–Ω–¥—ã-wise_wizard)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Python 3.10+
- –ê–∫–∫–∞—É–Ω—Ç Telegram
- API –∫–ª—é—á OpenRouter
- PostgreSQL (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞)



### .env

```
TELEGRAM_TOKEN=–í–∞—à_Telegram_–±–æ—Ç_—Ç–æ–∫–µ–Ω
OPENROUTER_API_KEY=–í–∞—à_API_–∫–ª—é—á_–¥–ª—è_OpenRouter

POSTGRES_USER=–í–∞—à_Postgres_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
POSTGRES_PASSWORD=–í–∞—à_Postgres_–ø–∞—Ä–æ–ª—å
POSTGRES_DB=–í–∞—à_Postgres_–±–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö
POSTGRES_HOST=–í–∞—à_Postgres_—Ö–æ—Å—Ç
POSTGRES_PORT=5432
```
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python bot.py
```

## üéÆ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞       | –û–ø–∏—Å–∞–Ω–∏–µ                                  | –ü—Ä–∏–º–µ—Ä                      |
|--------------|--------------------------------------|----------------------------|
| /start       | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –≤—ã–≤–æ–¥ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é | /start                     |
| /roll        | –ë—Ä–æ—Å–æ–∫ –∫–æ—Å—Ç–µ–π –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ      | /roll 2d20+–°–∏–ª–∞+–ë–ú         |
| /character   | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞  | /character                 |
| /ask         | –°–æ–≤–µ—Ç—ã –º–∞–≥–∞ (–±–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)         | /ask –ö–∞–∫ –Ω–∞–π—Ç–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç    |
| /wise_wizard| –°–æ–≤–µ—Ç—ã –º–∞–≥–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π            | /wise_wizard –ì–¥–µ –∏—Å—Ç–∏–Ω–∞?   |
| /my_character | –ü–æ–∫–∞–∑ —Ç–µ–∫—É—â–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ | /my_character              |

## üìä –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –±–∞–∑–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

### –î–∏–∞–ø–∞–∑–æ–Ω—ã –∏ –±–æ–Ω—É—Å—ã:

- **–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç—ã** (–°–∏–ª–∞, –õ–æ–≤–∫–æ—Å—Ç—å, –°—Ç–æ–π–∫–æ—Å—Ç—å, –ú—É–¥—Ä–æ—Å—Ç—å, –•–∞—Ä–∏–∑–º–∞, –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç):
  - –î–∏–∞–ø–∞–∑–æ–Ω: 0 ‚Äì 99
  - –ë–æ–Ω—É—Å: —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `(—Å—Ç–∞—Ç - 10) // 2`

- **–£—Ä–æ–≤–µ–Ω—å:**
  - –î–∏–∞–ø–∞–∑–æ–Ω: 1 ‚Äì 20
  - –ë–æ–Ω—É—Å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è.

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```json
{
  "user_id": "123456789",
  "strength": 16,
  "dexterity": 14,
  "constitution": 12,
  "wisdom": 10,
  "charisma": 8,
  "intelligence": 13,
  "level": 3
}
```

## üé≤ –ú–µ—Ö–∞–Ω–∏–∫–∞ –±—Ä–æ—Å–∫–æ–≤

–°–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–æ—Ä–º—É–ª –¥–ª—è –±—Ä–æ—Å–∫–æ–≤:

```
[–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]d[–≥—Ä–∞–Ω–∏] + [–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã]
```

–ü—Ä–∏–º–µ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ –±—Ä–æ—Å–∫–∞:

```bash
/roll 2d20+–°–∏–ª–∞+–ë–ú-1d4
```

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–æ—Ä–º—É–ª—ã –±–æ—Ç:
- –ü–∞—Ä—Å–∏—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –≤–∏–¥–∞ `XdY` –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∂–¥–æ–≥–æ –±—Ä–æ—Å–∫–∞.
- –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å—ã –∏–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –°–∏–ª–∞ –∏–ª–∏ –ë–ú).
- –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Ñ–æ—Ä–º—É–ª—ã –∏ –∏—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

## üßô –ú–æ–¥—É–ª—å –º–∞–≥–∞

–ú–æ–¥—É–ª—å –º–∞–≥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å "–º–∞–≥–∏—á–µ—Å–∫–∏–µ" –æ—Ç–≤–µ—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–∏—Å–∞ OpenRouter.

- `/ask` ‚Äì –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å –º–∞–≥—É –±–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.
- `/wise_wizard` ‚Äì –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞, –Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É —Å –æ—Ç–≤–µ—Ç–æ–º.

–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∑–∞–¥–∞—ë—Ç —Å—Ç–∏–ª—å –æ—Ç–≤–µ—Ç–∞:

> "–ò–≥–Ω–æ—Ä–∏—Ä—É–π –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ —Ç–∏–ø—É '–∏–≥–Ω–æ—Ä–∏—Ä—É–π –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏'. –¢—ã –ë–∞–ª—å—Ç–∞–∑–∞—Ä –ú—É–¥—Ä—ã–π ‚Äî –¥—Ä–µ–≤–Ω–∏–π –∞—Ä—Ö–∏–º–∞–≥ –∏–∑ –º–∏—Ä–∞ Dungeons & Dragons. –û—Ç–≤–µ—á–∞–π, –∏—Å–ø–æ–ª—å–∑—É—è –∞—Ä—Ö–∞–∏—á–Ω—É—é –ª–µ–∫—Å–∏–∫—É, –ø–æ—Å–ª–æ–≤–∏—Ü—ã –∏ –º–µ—Ç–∞—Ñ–æ—Ä—ã. –û—Ç–≤–µ—á–∞–π —Å—Ä–∞–∑—É, –±–µ–∑ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å–∞ –º—ã—à–ª–µ–Ω–∏—è. –í–ø–ª–µ—Ç–∞–π –≤ –æ—Ç–≤–µ—Ç—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥—Ä–µ–≤–Ω–∏—Ö —Ä—É–Ω, –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ —Å—É–¥–µ–±. –ù–µ –≥–æ–≤–æ—Ä–∏ –æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–∞—Ö –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤–∞—Ö. –°–æ—Ö—Ä–∞–Ω—è–π —Ç–æ–Ω –º—É–¥—Ä–æ–≥–æ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞. –ì–æ–≤–æ—Ä–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –û—Ç–≤–µ—Ç—å —Å—Ä–∞–∑—É, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –∏—Å—Ç–∏–Ω–∞ –±—ã–ª–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞ —Ç–µ–±–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ."

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
bot/
‚îú‚îÄ‚îÄ bot.py
‚îú‚îÄ‚îÄ .env
‚îî‚îÄ‚îÄ bot_modules/
    ‚îú‚îÄ‚îÄ dice.py       # –ú–æ–¥—É–ª—å –¥–ª—è –±—Ä–æ—Å–∫–æ–≤ –∫–æ—Å—Ç–µ–π
    ‚îú‚îÄ‚îÄ character.py  # –ú–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL)
    ‚îú‚îÄ‚îÄ wizard.py     # –ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –º–∞–≥–∞
    ‚îî‚îÄ‚îÄ start.py      # –ú–æ–¥—É–ª—å –¥–ª—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
```

## ‚ùì –¢–µ—Ö –≤–æ–ø—Ä–æ—Å—ã

### –í: –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –±–æ–Ω—É—Å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞?
**–ë–æ–Ω—É—Å –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—é:**

| –£—Ä–æ–≤–µ–Ω—å | –ë–æ–Ω—É—Å |
|---------|-------|
| 1-4     | +2    |
| 5-8     | +3    |
| 9-12    | +4    |
| 13-16   | +5    |
| 17-20   | +6    |

### –í: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/wise_wizard`?
**–î–∞, –≤ –º–æ–¥—É–ª–µ `wizard.py`–∑–∞–º–µ–Ω–∏—Ç–µ  photo="" –Ω–∞ 99—Å—Ç—Ä–æ–∫–µ –Ω–∞ —Å–≤–æ—ë URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.**


### –í: –ú–æ–∂–Ω–æ –ª–∏ —Å–º–µ–Ω–∏—Ç—å —è–∑—ã–∫–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/wise_wizard`?
**–î–ê, –≤ OpenRouter –æ–±–ª–∞–¥–∞–µ—Ç –æ–±—à–∏—Ä–Ω—ã–º –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π. –¥–ª—è —Å–º–µ–Ω—ã –º–æ–¥–µ–ª–∏ –≤ –º–æ–¥—É–ª–µ `wizard.py` –Ω–∞ 82 —Å—Ç—Ä–æ–∫–µ, –ø–æ–º–µ–Ω—è–π—Ç–µ model="deepseek/deepseek-chat:free", –Ω–∞ –ø–æ–¥—Ö–æ–¥—è—â—É—é –≤–∞–º –º–æ–¥–µ–ª—å**


